---
import MainLayout from "../../layout/MainLayout.astro";
import { getEnv } from "../../env/get-env";
import { getDataSource } from "../../db/data-source";
import "../../styles/page/goals-dashboard.scss";
import { AuthApp } from "../../client/app/AuthApp";
import { getQuery } from "../../utility/url/get-query";

const env = getEnv();
const AppDataSource = await getDataSource({
  database: env.DB_NAME,
  user: env.DB_USER,
  password: env.DB_PASS,
});

const req = Astro.request;

const query = getQuery<{ mode?: string }>(req.url);
---

<MainLayout title="SerioHome | Auth">
  <AuthApp client:load mode={query?.mode ?? "login"} />
</MainLayout>
